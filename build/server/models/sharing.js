// Generated by CoffeeScript 1.10.0
var Sharing, cozydb, sendAnswer;

cozydb = require('cozydb');

module.exports = Sharing = cozydb.getModel('Sharing', {
  docType: String,
  sharerUrl: String,
  shareID: String,
  desc: String,
  rules: [Object],
  continuous: Boolean,
  targets: [Object],
  accepted: Boolean
});

Sharing.pendingBySharedDocType = function(docType, callback) {
  return Sharing.request('pendingBySharedDocType', {
    key: docType
  }, callback);
};

Sharing.byShareID = function(shareID, callback) {
  return Sharing.request('byShareID', {
    key: shareID
  }, callback);
};

sendAnswer = function(data, callback) {
  return cozydb.api.answerSharing(data, function(err, body) {
    if (err) {
      return callback(err, body);
    } else {
      return callback(null, body);
    }
  });
};

Sharing.accept = function(id, callback) {
  return sendAnswer({
    id: id,
    accepted: true
  }, callback);
};

Sharing.refuse = function(id, callback) {
  return sendAnswer({
    id: id,
    accepted: false
  }, callback);
};
