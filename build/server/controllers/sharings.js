// Generated by CoffeeScript 1.10.0
var Sharing;

Sharing = require('../models/sharing');

module.exports.all = function(req, res) {
  var data;
  data = req.query;
  if (data.shareID) {
    return Sharing.byShareID(data.shareID, function(err, sharings) {
      if (err) {
        res.status(500).send({
          error: "Server error occured"
        });
      }
      if (!(sharings != null ? sharings.length : void 0)) {
        return res.status(404).send({
          error: "Sharing not found"
        });
      } else {
        return res.send(sharings[0]);
      }
    });
  } else {
    return Sharing.all(function(err, sharings) {
      if (err) {
        res.status(500).send({
          error: err
        });
      }
      if (!(sharings != null ? sharings.length : void 0)) {
        return res.status(404).send({
          error: "Sharing not found"
        });
      } else {
        return res.send(sharings[0]);
      }
    });
  }
};

module.exports.fetch = function(req, res, next, id) {
  return Sharing.find(id, function(err, sharing) {
    if (err) {
      return res.status(500).send({
        error: "Server error occured"
      });
    } else if (!sharing) {
      return res.status(404).send({
        error: "Sharing not found"
      });
    } else {
      req.sharing = sharing;
      return next();
    }
  });
};

module.exports.read = function(req, res) {
  return res.send(req.sharing);
};

module.exports.accept = function(req, res) {
  var data, id;
  data = req.body;
  id = data.id;
  return Sharing.accept(id, function(err) {
    if (err) {
      return res.status(500).send({
        error: err
      });
    } else {
      return res.send(data);
    }
  });
};

module.exports.refuse = function(req, res) {
  var data, id;
  data = req.body;
  id = data.id;
  return Sharing.refuse(id, function(err) {
    if (err) {
      return res.status(500).send({
        error: err
      });
    } else {
      return res.status(204).send(data);
    }
  });
};

//# sourceMappingURL=sharings.js.map
